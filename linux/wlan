#!/bin/sh
# try to connect to the wrong wlan in order to force netctl-auto to reconnect
# TODO: ping google.com
export SUDO_ASKPASS=/usr/lib/ssh/ssh-askpass
if [ `id -u` -ne 0 ]; then exec sudo "$0"; fi
if ping -c 1 -W 1 -q localhost >/dev/null; then
  netctl-auto list | \
    grep -v '^\* ' | \
    head -n 1      | \
    xargs netctl-auto switch-to
    #sort --random-sort | \
fi
