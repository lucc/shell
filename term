#!/usr/bin/env bash
# a script to start my favorite terminal emulator

version=5
args=( )
name=

usage () {
  echo "Usage: ${0##*/} [-x] [-n name] [-e args ...]"
  echo "       ${0##*/} -h"
  echo "       ${0##*/} -v"
}
terminal () {
  alacritty msg create-window "$@" \
    || exec alacritty "$@"
}

while getopts e:hn:vx opt; do
  case $opt in
    h) usage; exit;;
    v) echo "term -- Version $version (wrapping alacritty)"; exit;;
    x) set -x;;
    e) args=(-e "$OPTARG" "${@:$OPTIND}"); shift $#;;
    n) name=$OPTARG;;
    *) usage >&2; exit 2;;
  esac
done

terminal ${name:+--class "$name"} "${args[@]}"
